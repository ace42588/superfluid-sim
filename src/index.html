<!DOCTYPE html>
<html>
  <head>
    <title>WebGL GPE</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="styles.css" />
    <script id="MathJax-script" src="./src/tex-mml-chtml.js"></script>
  </head>
  <body>
    <div class="GUI-container">
      <div id="GUI"></div>
    </div>
    <div class="upper-container">
      <canvas id="GPE" width="256" height="256"></canvas>
    </div>
    <div class="lower-container">
      <details>
        <summary>Controls</summary>
        <ul>
          <li>Click: Insert positive vortex.</li>
          <li>Right click: Insert negative vortex.</li>
          <li>Click and drag: Stir the fluid by inserting an obstacle.</li>
          <li>Arrow keys: Move the "cannon" around the canvas.</li>
          <li>
            Z key: Insert positive vortex at the current "cannon" location.
          </li>
          <li>
            X key: Insert negative vortex at the current "cannon" location.
          </li>
          <li>WASD keys: Move the double "cannon" around the canvas.</li>
          <li>
            QE keys: Rotate the double "cannon".
          </li>
          <li>
            Space key: Insert a positive/negative pair at the double "cannon" location.
          </li>
        </ul>
      </details>
      <details>
        <summary>About this simulation</summary>
        <h1 class="title">WebGL Superfluid Simulation using dGPE</h1>
        <h2 class="subtitle">
          A modified version of the demo by
          <a href="https://gwstagg.co.uk" target="_blank">George Stagg</a>
        </h2>
        <p>
          The dissipative
          <a
            href="https://en.wikipedia.org/wiki/Gross–Pitaevskii_equation"
            target="_blank"
            >Gross-Pitaevskii Equation</a
          >
          (dGPE) is a quantum phenomenological model of finite-temperature
          <a href="https://en.wikipedia.org/wiki/Superfluidity" target="_blank"
            >superfluid</a
          >
          dynamics. The governing differential equation is written, \[
          (i-\gamma) \frac{\partial \psi}{\partial t} = -\frac{1}{2}\nabla^2\psi
          + |\psi|^2\psi + V\psi-\psi, \] where \(\psi\) is a wavefunction
          describing the fluid, \(V\) is a potential term, and \(\gamma\) is a
          measure of energy dissipation, related to the temperature of the
          system. The simulation above demonstrates the evolution of a two
          dimensional quantum superfluid according to the dGPE.
        </p>
        <h3>Superfluidity</h3>
        <p>
          Superfluid behaviour is non-intuitive as a direct consequence of the
          laws of quantum mechanics. At extremely low temperatures unexpected
          effects occur such as fluid flow without any
          <a href="https://en.wikipedia.org/wiki/Viscosity" target="_blank"
            >viscosity</a
          >
          or internal friction. Circulation in a superfluid is restricted into
          packets of
          <a href="https://en.wikipedia.org/wiki/Vorticity" target="_blank"
            >vorticity</a
          >
          called "<a
            href="https://en.wikipedia.org/wiki/Quantum_vortex"
            target="_blank"
            >quantum vortices</a
          >". Unlike normal fluid vortices that can vary in size (consider
          stirring of a cup of coffee compared to a tornado), quantum vortices
          are all identical in size and shape. Superfluids are an example of
          only a few physical systems where quantum behaviour can be observed at
          macro scales.
        </p>
        <p>
          Quantum vortices can be seen in the simulation above as black "holes"
          interacting with one another. There are two possible vortex
          polarities, "postitive" vortices with a constant circulation of
          \(\kappa\), and "negative" vortices with a constant circulation of
          -\(\kappa\). Due to the dissipation in the system, positive and
          negative vortices are attracted to one another. When they meet they
          annihilate, destroying themselves and converting their energy entirely
          into sound waves.
        </p>
        <p>
          A positive quantum vortex can be interactively placed into the system
          by clicking, a negative vortex by right clicking. Placing a vortex on
          top of another vortex in the system will either cause the vortices to
          annihilate (if they were oppositely signed) or to rotate around each
          other quickly (if they are same signed).
        </p>
        <p>
          Quantum vortices have been
          <a
            href="https://www.physics.umd.edu/courses/Phys726/The_Quantum_Vortex.htm#_Toc257799967"
            target="_blank"
            >observed in real superfluids</a
          >
          and in a rotating system can be seen to spontaneously form a vortex
          lattice. You can model such a system in this simulation by selecting
          the "Trapped &amp; Rotating" preset in the settings.
        </p>
        <h3>Stirring with Obstacles</h3>
        <p>
          An "obstacle" can be introduced into the system by clicking (or
          tapping on mobile) and dragging. The obstacle is created by
          manipulating the potential term \(V\). Such obstacles are introduced
          into real superfluid systems by stirring with rods (e.g. with
          supercooled liquid Helium) or by shining a blue detuned laser beam
          into the system (e.g. with a cloud of bosons undergoing Bose-Einstein
          Condensation).
        </p>
        <p>
          Stirring the fluid by moving an obstacle through it injects vorticity
          into the system via quantum vortices, which spontaneously appear
          around the obstacle if the obstacle is moving faster than some
          critical velocity. The exact value of the critical velocity depends on
          the specific parameters of the obstacle and system.
        </p>
        <h3>Wavefunction Phase</h3>
        <p>
          With the dGPE model we have direct access to the superfluid's quantum
          wavefunction. The wavefunction has a certain property called "<a
            href="https://en.wikipedia.org/wiki/Phase_factor"
            target="_blank"
            >phase</a
          >" which can be visualised by ticking "Show Phase" in the settings.
          The phase is not directly observable in reality, but it is related to
          some observable aspects of the system such as the local velocity of
          the fluid. The phase is one way to discover the polarity of a vortex,
          as the phase will wrap around a vortex by \(2\pi\) in either a
          clockwise or anti-clockwise fashion depending on the polarity.
        </p>
        <p>
          Clicking the "Quench Phase" button will set the phase randomly
          throughout the entire system. This has the effect of filling the
          system with vortices.
        </p>
        <h3>Dissipation</h3>
        <p>
          The dissipation parameter controls how much energy leaves the
          superfluid system over time. The quantum fluid approaches the lowest
          energy "<a
            href="https://en.wikipedia.org/wiki/Ground_state"
            target="_blank"
            >ground state</a
          >" as energy leaves the system, which manifests as sound waves
          dissipating and opposite signed vortices approaching one another and
          annihilating. Very loosely speaking, in this model the lower the value
          of the dissipation, the cooler the system is in comparison to the
          <a
            href="https://en.wikipedia.org/wiki/Bose–Einstein_condensate"
            target="_blank"
            >critical temperature for superfluidly to occur</a
          >.
        </p>
        <p>
          A dissipation of zero corresponds to a superfluid model at a
          temperature of
          <a href="https://en.wikipedia.org/wiki/Absolute_zero" target="_blank"
            >absolute-zero</a
          >. In such a model a superfluid has zero viscosity and sound waves
          will remain in the system forever.
        </p>
        <h3>Numerical Simulation</h3>
        <p>
          The simulation is performed on a \( 256 \times 256 \) computational
          grid using the
          <a
            href="https://en.wikipedia.org/wiki/Runge–Kutta_methods#The_Runge–Kutta_method"
            target="_blank"
            >RK4</a
          >
          time-stepping scheme, commonly used for solving ODEs, here implemented
          as webGL shaders. Twenty RK4 steps are performed after each frame is
          drawn on the screen. The complex numbers associated with the fluid's
          wavefunction on the computational grid are "packed" into RGBA textures
          for storage, limiting the precision. As such, the simulation is not as
          numerically stable as more traditional physical simulations. Under
          some parameters unstable modes can form and the simulation might "blow
          up". This is more likely to happen when you set a very low or zero
          dissipation. If this happens, clicking the "Reset Simulation" button
          should help.
        </p>
      </details>
    </div>
    <script src="dat.gui.js"></script>
    <script src="main.js" type="module"></script>
  </body>
</html>
